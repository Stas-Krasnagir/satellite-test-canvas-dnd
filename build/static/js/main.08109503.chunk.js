(this["webpackJsonpsatellite-test-canvas-dnd"]=this["webpackJsonpsatellite-test-canvas-dnd"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t),n.d(t,"firebase",(function(){return w.a}));var a=n(4),r=n.n(a),c=n(12),l=n.n(c),o=(n(23),n(24),n(18)),s=n(16),i=n(17),u=n(7),f=new(function(){function e(){Object(s.a)(this,e),this.canvas=null,Object(u.d)(this)}return Object(i.a)(e,[{key:"setCanvas",value:function(e){this.canvas=e}}]),e}()),y=window.localStorage;function x(e){var t=y.getItem("canvas");if(y.clear(),null!==t){var n=JSON.parse(t);n.push(e),y.setItem("canvas",JSON.stringify(n))}else{var a=[];a.push(e),y.setItem("canvas",JSON.stringify(a))}}function d(){return JSON.parse(y.getItem("canvas"))}var h=n(9),p=document.documentElement.clientWidth-25,v=window.innerHeight-70,j=Object(o.a)((function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){f.setCanvas(e.current);var t=f.canvas.getContext("2d"),n={x:p/6,y:v/12,w:1e3,h:550},a={x:2*n.x+51,y:161,w:658,h:n.h-n.h/10-102},r={x:null,y:null,down:!1},c={x:n.x+n.x/3,y:n.y+n.h/5,w:100,h:100},l={x:n.x+n.x/3+50,y:n.y+n.h/2,r:50},o=!1,s=!1,i=!1,u={type:"rect",x:n.x+n.x/3,y:n.y+n.h/5,w:100,h:100,stroke:!1},h={type:"circle",x:n.x+n.x/3+50,y:n.y+n.h/2,r:50,stroke:!1};function j(e,t,n){return e>=n.x&&e<=n.x+n.w&&t>=n.y&&t<=n.y+n.h}function b(e,t,n){return Math.sqrt((e-n.x)*(e-n.x)+(t-n.y)*(t-n.y))<50}function w(e,n,a,r,c){t.beginPath(),t.fillStyle="green",t.rect(e,n,a,r),t.fill(),c&&t.stroke(),t.closePath()}function g(e,n,a,r){t.beginPath(),t.fillStyle="blue",t.arc(e,n,a,0,2*Math.PI),t.fill(),r&&t.stroke(),t.closePath()}function m(){t.clearRect(0,0,f.canvas.width,f.canvas.height),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.fillStyle="#e8e4e3",t.fillRect(n.x,n.y,n.w,n.h/10),t.moveTo(n.x,n.h/10*2),t.lineTo(n.x+1e3,n.h/10*2),t.moveTo(2*n.x,n.y),t.lineTo(2*n.x,n.y+n.h),t.font="25px Arial",t.fillStyle="black",t.fillText("Figures",n.x+n.x/3,n.y+n.y/2),t.fillText("Canvas",n.x+n.w/2,n.y+n.y/2),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="green",t.fillRect(c.x,c.y,c.w,c.h),t.fillStyle="blue",t.arc(l.x,l.y,l.r,0,2*Math.PI,!1),t.fill(),t.closePath(),function(){var e=d();if(null!==e){var t=e.reverse().map((function(e){return"rect"!==e.type||!j(r.x,r.y,e)||!r.down||i||o||s?"circle"!==e.type||!b(r.x,r.y,e)||!r.down||i||s||o?e:(i=!0,e.stroke=!0,h={type:"circle",x:e.x,y:e.y,r:e.r,stroke:e.stroke},s=!0,null):(e.stroke=!0,i=!0,u={type:"rect",x:e.x,y:e.y,w:e.w,h:e.h,stroke:e.stroke},o=!0,null)})).filter((function(e){return null!==e})).reverse();y.clear(),t.forEach((function(e){"rect"===e.type&&w(e.x,e.y,e.w,e.h,e.stroke),"circle"===e.type&&g(e.x,e.y,e.r,e.stroke),e.stroke=!1,x(e)}))}}(),o&&w(u.x,u.y,u.w,u.h,u.stroke),s&&g(h.x,h.y,h.r,h.stroke)}f.canvas.onmousemove=function(e){r.x=e.pageX-e.target.offsetLeft,r.y=e.pageY-e.target.offsetTop,o&&(u={type:"rect",x:r.x-50,y:r.y-50,w:100,h:100,stroke:!0}),s&&(h={type:"circle",x:r.x,y:r.y,r:50,stroke:!0})},f.canvas.onmousedown=function(e){r.down=!0,r.x=e.pageX-e.target.offsetLeft,r.y=e.pageY-e.target.offsetTop,o=j(r.x,r.y,c),s=b(r.x,r.y,l)},f.canvas.onmouseup=function(e){r.down=!1,i=!1,o&&j(r.x,r.y,a)&&x(u),u={x:n.x+n.x/3,y:n.y+n.h/5,w:100,h:100},o=!1,s&&j(r.x,r.y,a)&&x(h),s=!1,h={x:n.x+n.x/3+50,y:n.y+n.h/2,r:50}},document.addEventListener("keydown",(function(e){"Delete"===e.key&&(o=!1,s=!1)})),setInterval((function(){return m()}),50)}),[]),Object(h.jsx)("div",{className:"canvas",children:Object(h.jsx)("canvas",{width:p,height:v,ref:e})})}));var b=function(){return Object(h.jsxs)("div",{className:"App_container",children:[Object(h.jsxs)("div",{className:"btn",children:[Object(h.jsx)("button",{onClick:function(){localStorage.clear()},children:" Clear Storage"}),Object(h.jsx)("button",{onClick:function(){try{var e=d();if(!e)return alert("\u041d\u0435\u0447\u0435\u0433\u043e \u0441\u043e\u0445\u0440\u043e\u043d\u044f\u0442\u044c!"),null;var t=new Blob([JSON.stringify(e)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="backup.json",a.textContent="Download backup.json",document.getElementById("json").appendChild(a)}catch(r){console.log(r)}},children:" Save"}),Object(h.jsx)("div",{id:"json"}),Object(h.jsx)("input",{type:"file",id:"file"}),Object(h.jsx)("button",{onClick:function(){try{var e=document.getElementById("file").files[0];if(!e)return alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"),null;var t=e.name,n=t.split(".")[t.split(".").length-1].toLowerCase();if(!["json"].includes(n))return alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 json \u0444\u0430\u0439\u043b"),null;var a=new FileReader;a.readAsText(e),a.onload=function(){var e=JSON.parse(a.result);if(!e)return alert("\u0424\u0430\u0439\u043b \u043f\u0443\u0441\u0442\u043e\u0439"),null;e.forEach((function(e){x(e)}))}}catch(r){console.log(r)}},children:" Read"})]}),Object(h.jsx)("div",{className:"canvas_container",children:Object(h.jsx)(j,{})})]})},w=n(14);w.a.initializeApp({apiKey:"AIzaSyBWOhSHROTkF7f9JuPruFHBGGZTlMKStOA",authDomain:"satellite-test-canvas-dnd.firebaseapp.com",projectId:"satellite-test-canvas-dnd",storageBucket:"satellite-test-canvas-dnd.appspot.com",messagingSenderId:"1053165702609",appId:"1:1053165702609:web:b82d084140d34d6c55e4f0"}),l.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(b,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.08109503.chunk.js.map